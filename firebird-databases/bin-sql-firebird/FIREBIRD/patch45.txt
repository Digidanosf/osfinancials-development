ALTER TABLE STOCK ADD 
WLOCBATSERTYPEID Integer
;
CREATE TABLE DOC_LOCBATSER
(
  WLOCBATSER_ID Integer NOT NULL,
  WSTOCKID Integer NOT NULL,
  WDOCID Integer,
  WLINEID Integer,
  SDESCRIPTION Varchar(40),
  DLASTSALESDATE Date,
  FQTY Numeric(12,8),
  WLOCATIONID Integer,
  DCREATEDATE Date,
  FQTYORG Numeric(12,8),
  PRIMARY KEY (WLOCBATSER_ID)
)
;
ALTER TABLE DOC_LOCBATSER ADD CONSTRAINT FK_DOC_LOCBATSER_DL
  FOREIGN KEY (WDOCID,WLINEID) REFERENCES DOCLINE (WDOCID,WDOCLINEID) ON UPDATE CASCADE ON DELETE CASCADE
;
ALTER TABLE DOC_LOCBATSER ADD
  FOREIGN KEY (WSTOCKID) REFERENCES STOCK (WSTOCKID) ON UPDATE CASCADE ON DELETE CASCADE
;
CREATE TABLE DOC_LOCBATSERSALE
(
  WLOCBATSERSALE_ID Integer NOT NULL,
  WLOCBATSER_ID Integer NOT NULL,
  WDOCID Integer,
  WLINEID Integer,
  WSTOCKID Integer,
  DLASTSALESDATE Date,
  FQTY Numeric(12,8),
  PRIMARY KEY (WLOCBATSERSALE_ID)
)
;
ALTER TABLE DOC_LOCBATSERSALE ADD CONSTRAINT FK_DOC_LOCBATSERSALE_DOCLINE
  FOREIGN KEY (WDOCID,WLINEID) REFERENCES DOCLINE (WDOCID,WDOCLINEID) ON UPDATE CASCADE ON DELETE CASCADE
;
ALTER TABLE DOC_LOCBATSERSALE ADD CONSTRAINT FK_DOC_LOCBATSER_TOSALE
  FOREIGN KEY (WLOCBATSER_ID) REFERENCES DOC_LOCBATSER (WLOCBATSER_ID) ON UPDATE CASCADE ON DELETE CASCADE
;
{generator_cr_start}GEN_LOCBATSER{generator_cr_end} ; 
; 
{generator_cr_start}GEN_LOCBATSERSALE{generator_cr_end} ; 
;
{generator_cr_start}GEN_LOCATION{generator_cr_end} ;   
;
update Sysvars set WVersion=549
;






