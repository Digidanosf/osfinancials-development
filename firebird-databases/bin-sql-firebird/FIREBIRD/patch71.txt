CREATE TABLE BATTYPES_TRANSLATE
(
  WBATCHTYPEID Integer NOT NULL,
  WLANGUAGEID Integer NOT NULL,
  SDESCRIPTION Varchar(255),
  CONSTRAINT PK_BATTYPES_TRANSLATE PRIMARY KEY (WBATCHTYPEID,WLANGUAGEID)
)
;
ALTER TABLE BATTYPES_TRANSLATE ADD CONSTRAINT FK_BATTYPES_TRANSLATE_BAT
  FOREIGN KEY (WBATCHTYPEID) REFERENCES BATTYPES (WBATCHTYPEID) ON UPDATE CASCADE ON DELETE CASCADE
;
ALTER TABLE BATTYPES_TRANSLATE ADD CONSTRAINT FK_BATTYPES_TRANSLATE_LANG
  FOREIGN KEY (WLANGUAGEID) REFERENCES GROUPS (WGROUPID) ON UPDATE CASCADE ON DELETE CASCADE
;
<@MSSQLGO@>
CREATE VIEW V_BATTYPES ( WBATCHTYPEID,  SDESCRIPTION  , 
 BCASHBOOK, WCONTRAACCOUNTID, BCONTRAPERLINE, BINCREMENTREFNO, 
 BREPEATDETAILS, BCONSOLIDATEBALANCING, WDEBITCREDIT, WPAYMENTGROUPID, 
 WDEFAULTTAXID, BVIEWEXCLUSIVE, BLINKOI, BINCLUSIVEMODE, DSYSDATE )
AS  
SELECT a.WBATCHTYPEID,  coalesce(b.SDESCRIPTION,a.SDESCRIPTION  ){if PostgreSQL}::varchar(255){endif} SDESCRIPTION ,
 a.BCASHBOOK, a.WCONTRAACCOUNTID, a.BCONTRAPERLINE, a.BINCREMENTREFNO, 
 a.BREPEATDETAILS, a.BCONSOLIDATEBALANCING, a.WDEBITCREDIT, a.WPAYMENTGROUPID, 
 a.WDEFAULTTAXID, a.BVIEWEXCLUSIVE, a.BLINKOI, a.BINCLUSIVEMODE, a.DSYSDATE
FROM BATTYPES a
left join BATTYPES_TRANSLATE b on a.WBATCHTYPEID = b.WBATCHTYPEID
and b.WLANGUAGEID = {if InterBase} (SELECT first 1 p.WLANGUAGEID
FROM GETUSERLANG p){else}{dbopre}GETUSERLANG()  {endif}
;
<@MSSQLGO@>
update Sysvars set WVersion=580
;






