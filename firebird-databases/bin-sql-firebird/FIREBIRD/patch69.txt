CREATE TABLE ACCOUNT_TRANSLATE
(
  WACCOUNTID Integer NOT NULL,
  WLANGUAGEID Integer NOT NULL,
  SDESCRIPTION Varchar(255)
)
;
ALTER TABLE ACCOUNT_TRANSLATE ADD CONSTRAINT FK_ACCOUNT_TRANSLATE_ACC
  FOREIGN KEY (WACCOUNTID) REFERENCES ACCOUNT (WACCOUNTID) ON UPDATE CASCADE ON DELETE CASCADE
;
ALTER TABLE ACCOUNT_TRANSLATE ADD CONSTRAINT FK_ACCOUNT_TRANSLATE_WTRN
  FOREIGN KEY (WLANGUAGEID) REFERENCES GROUPS (WGROUPID) ON UPDATE CASCADE ON DELETE CASCADE
;
<@MSSQLGO@>
CREATE VIEW V_ACCOUNT (WACCOUNTID, SACCOUNTCODE, SMAINACCOUNTCODE, SSUBACCOUNTCODE, SDESCRIPTION, WACCOUNTTYPEID, WREPORTINGGROUP1ID, WREPORTINGGROUP2ID, BSUBACCOUNTS, BINCOMEEXPENSE, BOPENITEM, BINACTIVE, DSYSDATE, WPROFILEID, WLINKACCOUNT, WTAXACCOUNT, WCURRENCYID)
AS 
SELECT a.WACCOUNTID, a.SACCOUNTCODE, a.SMAINACCOUNTCODE, 
a.SSUBACCOUNTCODE, coalesce(b.SDESCRIPTION,a.SDESCRIPTION  ){if PostgreSQL}::varchar(255){endif} SDESCRIPTION, a.WACCOUNTTYPEID, 
a.WREPORTINGGROUP1ID, a.WREPORTINGGROUP2ID, a.BSUBACCOUNTS, 
a.BINCOMEEXPENSE, a.BOPENITEM, a.BINACTIVE, a.DSYSDATE, a.WPROFILEID, 
a.WLINKACCOUNT, a.WTAXACCOUNT, a.WCURRENCYID
FROM ACCOUNT a left join ACCOUNT_TRANSLATE b on a.WACCOUNTID = b.WACCOUNTID
and b.WLANGUAGEID = {if InterBase} (SELECT first 1 p.WLANGUAGEID
FROM GETUSERLANG p){else}{dbopre}GETUSERLANG()  {endif}
;
<@MSSQLGO@>
CREATE VIEW V_GROUPS(
 WGROUPID, WGROUPTYPEID, SDESCRIPTION, WPARENTGROUP2ID,
 WPARENTGROUP1ID
 , DSYSDATE, WSORTNO, BDISABLE, WCOLOR, WTEXTCOLOR
)
AS  
SELECT a.WGROUPID, a.WGROUPTYPEID,coalesce(b.SDESCRIPTION,a.SDESCRIPTION)
{if PostgreSQL}::varchar(255){endif} SDESCRIPTION, a.WPARENTGROUP2ID, a.WPARENTGROUP1ID,
 a.DSYSDATE, a.WSORTNO, a.BDISABLE, a.WCOLOR, a.WTEXTCOLOR
FROM GROUPS a left join GROUPS_DESCRIPTIONS b on 
a.WGROUPID = b.WGROUPID and b.WLANGUAGEID = 
{if InterBase} (SELECT first 1 p.WLANGUAGEID FROM GETUSERLANG p){else}{dbopre}GETUSERLANG(){endif}
;
<@MSSQLGO@>
ALTER TABLE DEBTOR {if mysql} change {else} ALTER {endif} SBANKACCOUNTNUMBER {if mysql}{else}TYPE{endif} varChar(45)
;
ALTER TABLE CREDITOR {if mysql} change {else} ALTER{endif} SBANKACCOUNTNUMBER {if mysql}{else}TYPE{endif} varChar(45)
;
update Sysvars set WVersion=578
;
ALTER TABLE USERS ADD 
WLANGUAGEID Integer
;






