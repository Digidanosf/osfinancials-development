CREATE TABLE IMP_TOTALS(IMP_TOTALID Integer NOT NULL,
 IMP_SOURCEID Integer NOT NULL,
 IMP_EXTID varchAr(60) NOT NULL  ,
 WSTOCKID Integer NOT NULL, CONSTRAINT PK_IMP_TOTALID PRIMARY KEY (IMP_TOTALID));
ALTER TABLE IMP_TOTALS ADD CONSTRAINT FK_IMP_TOTALS_SOURCE
  FOREIGN KEY (IMP_SOURCEID) REFERENCES IMP_SOURCE (IMP_SOURCEID) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE IMP_TOTALS ADD CONSTRAINT FK_IMP_TOTALS_STOCK FOREIGN KEY (WSTOCKID) 
 REFERENCES STOCK (WSTOCKID) ON UPDATE CASCADE ON DELETE CASCADE;
CREATE INDEX IDX_IMP_TOTALSEXTID ON IMP_TOTALS (IMP_SOURCEID,IMP_EXTID);
DROP TRIGGER ACCOUNT_DDATE;
DROP TRIGGER DOCHEAD_DDATE;
DROP TRIGGER STOCK_DDATE;
DROP TRIGGER TOTALS_DDATE;
DROP TRIGGER TRANSACT_DDATE;
 
{if InterBase}CREATE TRIGGER ACCOUNT_DDATE FOR ACCOUNT ACTIVE
BEFORE INSERT OR UPDATE POSITION 0
AS  
BEGIN  
        new.dSysdate = CURRENT_TIMESTAMP {scriptstddelim} 
END{endif};
{if InterBase}CREATE TRIGGER DOCHEAD_DDATE FOR DOCHEAD ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS  
BEGIN
     new.dSysdate = CURRENT_TIMESTAMP {scriptstddelim}
END{endif};
{if InterBase}CREATE TRIGGER STOCK_DDATE FOR STOCK ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS  
BEGIN
  new.dSysdate = CURRENT_TIMESTAMP {scriptstddelim} 
END{endif};
{if InterBase}CREATE TRIGGER TOTALS_DDATE FOR TOTALS ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
BEGIN
   new.dSysdate = CURRENT_TIMESTAMP {scriptstddelim} 
END{endif};
{if InterBase}CREATE TRIGGER TRANSACT_DDATE FOR TRANSACT ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
 BEGIN  
      new.dSysdate =CURRENT_TIMESTAMP {scriptstddelim}
 END{endif};

